<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>aprovApp</title>
<link rel="manifest" href="manifest.json">
<style>
body{background:#0a0f1a;color:#fff;font-family:Arial;text-align:center;}
h1{color:#00e5ff;}
.card{background:#111827;margin:15px auto;padding:20px;border-radius:12px;width:95%;max-width:700px;}
textarea{width:100%;height:200px;background:#0d1117;color:#00ff90;border:1px solid #333;padding:10px;border-radius:8px;}
button{padding:8px 12px;margin:4px;border:none;border-radius:8px;cursor:pointer;font-weight:bold;}
.start{background:#00c853;}
.pause{background:#d50000;}
.done{background:#2962ff;}
.save{background:#ff6d00;}
.timer{font-size:22px;margin:8px;}
.green{color:#00ff90;}
.red{color:#ff5252;}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-top:10px;}
.day{padding:8px;background:#1f2937;border-radius:6px;font-size:12px;}
.doneDay{background:#00c853;}
.today{border:2px solid #ffd600;}
</style>
</head>
<body>

<h1>aprovApp ‚Äì MODO MILITAR</h1>

<div class="card">
<h3>üìã Cronograma</h3>
<textarea id="cronograma"></textarea>
<button class="save" onclick="salvar()">Salvar</button>
</div>

<div class="card">
<h2 id="diaAtual"></h2>
<p id="atividade"></p>

<div class="timer">üî¢ Matem√°tica <span id="mat"></span></div>
<button class="start" onclick="start('mat',11700)">Iniciar</button>
<button class="pause" onclick="pause('mat')">Pausar</button>

<div class="timer">üìö Portugu√™s <span id="port"></span></div>
<button class="start" onclick="start('port',5400)">Iniciar</button>
<button class="pause" onclick="pause('port')">Pausar</button>

<div class="timer">üîÅ Revis√£o <span id="rev"></span></div>
<button class="start" onclick="start('rev',900)">Iniciar</button>
<button class="pause" onclick="pause('rev')">Pausar</button>

<button class="done" onclick="concluirDia()">Concluir Dia</button>

<p id="status"></p>
</div>

<div class="card">
<h3>üìÖ Calend√°rio de Cumprimento</h3>
<div class="calendar" id="calendar"></div>
</div>

<script>

const inicio = new Date("2026-02-22");
let intervalos = {};
let tempoEstudadoHoje = 0;

function formatar(seg){
let h=Math.floor(seg/3600);
let m=Math.floor((seg%3600)/60);
let s=seg%60;
return (h<10?"0":"")+h+":"+(m<10?"0":"")+m+":"+(s<10?"0":"")+s;
}

function start(id,meta){
if(!intervalos[id]){
let tempo=parseInt(localStorage.getItem(id))||meta;
intervalos[id]=setInterval(()=>{
if(tempo>0){
tempo--;
tempoEstudadoHoje++;
document.getElementById(id).innerText=formatar(tempo);
localStorage.setItem(id,tempo);
}
},1000);
}
}

function pause(id){
clearInterval(intervalos[id]);
intervalos[id]=null;
}

function concluirDia(){
let minimo=4.5*3600;
if(tempoEstudadoHoje<minimo){
document.getElementById("status").innerHTML="<span class='red'>Tempo m√≠nimo n√£o atingido (4h30)</span>";
return;
}
marcarCalendario();
document.getElementById("status").innerHTML="<span class='green'>MISS√ÉO CUMPRIDA</span>";
}

function salvar(){
localStorage.setItem("cronograma",document.getElementById("cronograma").value);
atualizarDia();
}

function atualizarDia(){
let texto=localStorage.getItem("cronograma")||"";
let linhas=texto.split("\n");
let hoje=new Date();
let diff=Math.floor((hoje-inicio)/(1000*60*60*24));
if(diff<0) diff=0;
if(diff>=linhas.length) diff=linhas.length-1;
document.getElementById("diaAtual").innerText="Dia "+(diff+1);
document.getElementById("atividade").innerText=linhas[diff]||"";
}

function gerarCalendario(){
let cal=document.getElementById("calendar");
cal.innerHTML="";
for(let i=0;i<28;i++){
let d=document.createElement("div");
d.className="day";
d.innerText=i+1;
if(localStorage.getItem("done"+i)) d.classList.add("doneDay");
cal.appendChild(d);
}
}

function marcarCalendario(){
let hoje=new Date();
let diff=Math.floor((hoje-inicio)/(1000*60*60*24));
localStorage.setItem("done"+diff,true);
gerarCalendario();
}

window.onload=function(){
atualizarDia();
gerarCalendario();
["mat","port","rev"].forEach((id,i)=>{
let metas=[11700,5400,900];
let tempo=parseInt(localStorage.getItem(id))||metas[i];
document.getElementById(id).innerText=formatar(tempo);
});
}

</script>
</body>
</html>
