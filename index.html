<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>aprovApp</title>
<link rel="manifest" href="manifest.json">
<style>
body{background:#0a0f1a;color:#fff;font-family:Arial;text-align:center;}
h1{color:#00e5ff;}
.card{background:#111827;margin:15px auto;padding:20px;border-radius:12px;width:95%;max-width:800px;}
textarea{width:100%;height:180px;background:#0d1117;color:#00ff90;border:1px solid #333;padding:10px;border-radius:8px;}
button{padding:6px 10px;margin:4px;border:none;border-radius:8px;cursor:pointer;font-weight:bold;}
.save{background:#ff6d00;}
.nav{background:#2962ff;}
.restore{background:#00c853;}
.timer{font-size:18px;margin:5px;}
.green{color:#00ff90;}
.red{color:#ff5252;}
.calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-top:10px;}
.day{padding:8px;background:#1f2937;border-radius:6px;font-size:12px;}
.doneDay{background:#00c853;}
.today{border:2px solid #ffd600;}
#countdown{font-size:18px;color:#ffd600;margin-bottom:10px;}
</style>
</head>
<body>

<h1>aprovApp â€“ MODO MILITAR</h1>
<div id="countdown"></div>

<div class="card">
<h3>ðŸ“‹ Cronograma</h3>
<textarea id="cronograma"></textarea><br>
<button class="save" onclick="salvar()">Salvar Nova VersÃ£o</button>
<button class="nav" onclick="versaoAnterior()">â¬… VersÃ£o Anterior</button>
<button class="nav" onclick="proximaVersao()">VersÃ£o Seguinte âž¡</button>
<button class="restore" onclick="restaurarVersao()">Restaurar</button>
<p id="infoVersao"></p>
</div>

<div class="card">
<h3>ðŸ“… CalendÃ¡rio</h3>
<h4 id="mesAno"></h4>
<div class="calendar" id="calendar"></div>
</div>

<script>

const prova = new Date("2026-03-21T08:00:00");
let versoes = JSON.parse(localStorage.getItem("versoes")) || [];
let indiceAtual = versoes.length - 1;

function salvar(){
let texto = document.getElementById("cronograma").value;
let novaVersao = {
texto:texto,
data:new Date().toLocaleString()
};
versoes.push(novaVersao);
localStorage.setItem("versoes",JSON.stringify(versoes));
indiceAtual = versoes.length - 1;
mostrarInfoVersao();
}

function versaoAnterior(){
if(indiceAtual>0){indiceAtual--;mostrarInfoVersao();}
}

function proximaVersao(){
if(indiceAtual<versoes.length-1){indiceAtual++;mostrarInfoVersao();}
}

function restaurarVersao(){
if(versoes[indiceAtual]){
document.getElementById("cronograma").value=versoes[indiceAtual].texto;
}
}

function mostrarInfoVersao(){
if(versoes[indiceAtual]){
document.getElementById("infoVersao").innerText=
"VersÃ£o "+(indiceAtual+1)+" - "+versoes[indiceAtual].data;
}
}

function gerarCalendario(){
let hoje = new Date();
let ano = hoje.getFullYear();
let mes = hoje.getMonth();
let primeiroDia = new Date(ano,mes,1).getDay();
let ultimoDia = new Date(ano,mes+1,0).getDate();

document.getElementById("mesAno").innerText=
hoje.toLocaleString('pt-BR',{month:'long'})+" "+ano;

let cal = document.getElementById("calendar");
cal.innerHTML="";

for(let i=0;i<primeiroDia;i++){
let vazio=document.createElement("div");
cal.appendChild(vazio);
}

for(let d=1;d<=ultimoDia;d++){
let dia=document.createElement("div");
dia.className="day";
dia.innerText=d;

if(d===hoje.getDate()) dia.classList.add("today");
if(localStorage.getItem("done-"+ano+"-"+mes+"-"+d))
dia.classList.add("doneDay");

dia.onclick=function(){
localStorage.setItem("done-"+ano+"-"+mes+"-"+d,true);
dia.classList.add("doneDay");
}

cal.appendChild(dia);
}
}

function atualizarCountdown(){
let agora=new Date();
let diff=prova-agora;
if(diff<0){document.getElementById("countdown").innerText="PROVA REALIZADA";return;}
let dias=Math.floor(diff/(1000*60*60*24));
let horas=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
let min=Math.floor((diff%(1000*60*60))/(1000*60));
let seg=Math.floor((diff%(1000*60))/1000);
document.getElementById("countdown").innerText=
"â³ Faltam "+dias+"d "+horas+"h "+min+"m "+seg+"s";
}

window.onload=function(){
if(versoes.length>0){
document.getElementById("cronograma").value=
versoes[versoes.length-1].texto;
mostrarInfoVersao();
}
gerarCalendario();
atualizarCountdown();
setInterval(atualizarCountdown,1000);
}

</script>
</body>
</html>
